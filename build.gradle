apply plugin: 'groovy'
apply plugin: 'eclipse'

repositories {
  mavenCentral()
}
dependencies {
  compile 'org.codehaus.groovy:groovy-all:2.1.6'
  compile 'log4j:log4j:1.2.16'
  compile 'javax.mail:mail:1.4.7'
  testCompile 'junit:junit:4.+'
}


// run as:
// gradle exec -Padmin=<email> -Pinput=<file_in_resources> -Psubject=<what you want>
task exec (dependsOn: [classes], type: JavaExec) { 
  if(!project.hasProperty('input')) {
    ext.input = 'draw.txt'
  }
  if(!project.hasProperty('admin')) {
    ext.admin = 'a@a.com'
  }
  if(!project.hasProperty('subject')) {
    ext.subject = 'A draw'
  }
  
  main = 'chalda.Main'
  classpath = sourceSets.main.runtimeClasspath
  args "$input", "$admin", "$subject"
}
